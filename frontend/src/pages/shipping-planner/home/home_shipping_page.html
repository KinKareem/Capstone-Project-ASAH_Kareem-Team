<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mining Operations Dashboard</title>
    <link rel="stylesheet" href="../../../../src/style/ship-planner/style.css">
</head>

<body>

    <div class="dashboard-grid">

        <aside class="sidebar">
            <div class="profile-pic">
                <img src="../../../../public/assets/mine-planner-image/mine-planner-profile.png" alt="profile">
            </div>

            <h3 class="profile-name">Nino</h3>
            <p class="profile-role">Dashboard Shipping Planner</p>

            <button class="btn-sidebar btn-primary">
                Akses Mine Hub
            </button>
            <button class="btn-sidebar btn-secondary">
                Pengaturan Akun
            </button>

            <div class="logout-container">
                <button class="btn-logout" id="logout-btn">
                    Keluar (Logout)
                </button>
            </div>
        </aside>

        <main class="main-content">
            <h1 style="font-size: 30px; font-weight: 700; margin-bottom: 32px; color: #1f2937;">Dashboard Shipping
                Planner
            </h1>

            <section id="dashboard-widgets" style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:24px;">
                <div class="card" aria-label="Target Tonase Mingguan">
                    <h2 style="font-size:16px;font-weight:700;margin:0 0 8px;">Target Tonase Mingguan</h2>
                    <canvas id="shipTonnageChart" width="400" height="220" role="img" aria-label="Bar chart target tonase mingguan"></canvas>
                </div>
                <div class="card" aria-label="Approval Shipping">
                    <h2 style="font-size:16px;font-weight:700;margin:0 0 8px;">Approval Shipping</h2>
                    <canvas id="shipmentApprovalChart" width="400" height="220" role="img" aria-label="Pie chart approval shipping"></canvas>
                    <div id="shipmentLegend" class="legend" aria-label="Keterangan pie chart"></div>
                </div>
                <div class="card" aria-live="polite" aria-label="Cuaca Terkini">
                    <h2 style="font-size:16px;font-weight:700;margin:0 0 8px;">Cuaca Terkini</h2>
                    <div id="shipWeatherCard" style="display:flex;flex-direction:column;gap:6px;">
                        <div id="shipWeatherSummary">Memuat cuaca...</div>
                        <div id="shipWeatherMeta" style="font-size:12px;color:#555"></div>
                    </div>
                </div>
                <div class="card" aria-label="Weekly Plan">
                    <h2 style="font-size:16px;font-weight:700;margin:0 0 8px;">Weekly Plan</h2>
                    <table id="shipWeeklyTable" class="table" aria-label="Tabel weekly plan shipping">
                        <thead>
                            <tr>
                                <th>Week</th>
                                <th>Year</th>
                                <th>Target Tonnage</th>
                                <th>Calori</th>
                                <th>Ash Max</th>
                                <th>Shipping</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <div class="menu-grid">
                <a href="../ai_agent/ai_agent.html" class="menu-card">
                    <img src="../../../../public/assets/ship-planner-image/sp2.jpg" alt="AI Icon" class="menu-icon">
                    <p class="menu-label">AI Optimization</p>
                </a>

                <a href="../shipping_schedule/shipping_schedule.html" class="menu-card">
                    <img src="../../../../public/assets/ship-planner-image/sp2.jpg" alt="AI Icon" class="menu-icon">
                    <p class="menu-label">Shipping Schedule</p>
                </a>

                <a href="../shipping_vessel/shipping_vessel.html" class="menu-card">
                    <img src="../../../../public/assets/ship-planner-image/sp2.jpg" alt="AI Icon" class="menu-icon">
                    <p class="menu-label">Shipping Vessel</p>
                </a>
            </div>
        </main>

        <!-- Floating Chat Button -->
        <div class="floating-chat" id="chatToggle">
            üí¨ Chatbot AI
        </div>

        <!-- Chatbot Popup -->
        <div class="chatbot-popup" id="chatbotPopup">
            <div class="chatbot-header">
                <h3>
                    <span class="status-dot" id="statusDot"></span>
                    AI Assistant
                </h3>
                <button class="close-btn" id="closeChat">√ó</button>
            </div>

            <div class="config-notice" id="configNotice">
                ‚ö†Ô∏è Mohon konfigurasi N8N Webhook URL terlebih dahulu
            </div>

            <div class="chatbot-messages" id="chatMessages">
                <div class="message bot">
                    <div class="message-avatar">AI</div>
                    <div class="message-content">
                        Halo! Saya AI Assistant untuk Shipping Planner. Ada yang bisa saya bantu hari ini?
                    </div>
                </div>
            </div>

            <div class="chatbot-input">
                <input type="text" id="messageInput" placeholder="Ketik pesan Anda...">
                <button class="send-btn" id="sendBtn">Kirim</button>
            </div>
        </div>

    </div>

    <script src="minichatbox.js"></script>
    <script type="module" src="./dashboard.js"></script>
</body>

</html>
